---
title: Linux
author: Wang Yue Niao
top: false
toc: true
date: 2020-12-06 21:16:00
tags: Linux
categories: Linux
---

# Linux

## linux目录管理

**Linux的目录中有且只有一个根目录**

**Linux的各个目录存放的内容是规划好，不用乱放文件**

**Linux是以文件形式管理我们的设备，因此linux系统，一切皆文件**

![](https://gitee.com/yueyueniao-gif/blogimage/raw/master/img/20220302214658.png)

- **/bin**：
  bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。

- **/boot：**
  这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。

- **/dev ：**
  dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。

- **/etc：**
  etc 是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。

- **/home**：
  用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve。

- **/lib**：
  lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。

- **/lost+found**：
  这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。

- **/media**：
  linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。

- **/mnt**：
  系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。

- **/opt**：
  opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。

- **/proc**：
  proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。
  这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：

  ```
  echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all
  ```

- **/root**：
  该目录为系统管理员，也称作超级权限者的用户主目录。

- **/sbin**：
  s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。

- **/selinux**：
   这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。

- **/srv**：
   该目录存放一些服务启动之后需要提取的数据。

- **/sys**：

  这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。

  sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。

  该文件系统是内核设备树的一个直观反映。

  当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。

- **/tmp**：
  tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。

- **/usr**：
   usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。

- **/usr/bin：**
  系统用户使用的应用程序。

- **/usr/sbin：**
  超级用户使用的比较高级的管理程序和系统守护程序。

- **/usr/src：**
  内核源代码默认的放置目录。

- **/var**：
  var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。

- **/run**：
  是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。

**/usr：系统级的目录，可以理解为 C:/Windows/。**

**/usr/lib：理解为 C:/Windows/System32。**

**/usr/local：用户级的程序目录，可以理解为 C:/Progrem Files/。用户自己编译的软件默认会安装到这个目录下。**

## Linux实操

- telnet ip port **测试端口连通性**

### vi和vim编辑器

#### 正常模式

- 以vim打开一个档案就直接进入了一般模式（这是默认的模式）。

#### 插入模式/编辑模式

- 按下i、I、o、O、a、A、r、R等任何一个字母之后才会进入编辑模式，一般来说按i。

#### 命令行模式

- 在这个模式中，可以提供你相关指令、完成读取、替换、离开vim、显示行号等的动作则是在此模式中达成的！
- 如果打开了文件没有进行修改，可以直接使用:q退出
- 如果打开了文件进行了修改，但是不想保存可以使用:q!退出
- 如果打开了文件进行了修改并且要保存，可以使用:wq退出
- 拷贝当前行yy，拷贝当前行向下几行就是几yy，例如拷贝当前行向下两行：2yy
- 删除当前行dd，删除当前行向下几行就是几dd，例如删除当前行向下两行：2dd
- 在文件中查找某个单词：/关键字，回车查找，输入n就是查找下一个
- 在文件中撤销，使用撤销动作u
- 设置文件行号:set nu取消文件行号:set nonu
- 快捷键到文档末尾直接按G，到文档开头按两下gg
- 快速定位到行，先设置显示行号:set nu，然后按你想去的行号，再按shift+g

### 关机重启和用户登录注销命令

**不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘中**

- shutdown -h now       立刻进行关机
- shutdown -h 1             “hello,1分钟后就会关机了”
- shutdown -r now        现在重庆启动计算机
- halt                               关机，效果等价于关机
- reboot                          现在重新启动计算机
- sync                              把内存的数据同步到磁盘

#### 用户登录和注销

- 基本介绍
  - 登录时尽量少用root账号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通用户登录，登录后在用“su -用户名”来切换成系统管理员身份。
  - 在提示符下输入logout即可注销用户
- 使用细节
  - logout注销指令在图形运行级别无效，在运行级别3下有效

### 用户管理

![EBtlh.png](https://s3.jpg.cm/2020/12/07/EBtlh.png)

**Linux系统是一个多用户多任务的操作系统，任何一个要是用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。**

#### 添加用户

- useradd [选项]  用户名。
- 当创建用户成功后，会自动的创建和用户名相同的家目录。
- 也可以通过useradd -d指定目录 新的用户名，给新创建的用户指定家目录。

#### 指定/修改密码

- passwd 用户名

#### 删除用户

- userdel 用户名         删除用户
- userdel -r 用户名     删除用户和用户的家目录
- 删除用户时一般不会将家目录删掉

#### 查询用户信息

- id 用户名

#### 切换用户

- su - 切换用户。如果当前用户权限不够，可以通过su - 指令，切换到高权限用户，比如 su - root

#### 查看当前用户/登录用户

- whoami

### 用户组

**类似于角色，系统可以对有共性的多个用户进行统一的管理**

#### 新增组

- groupadd 组名

#### 删除组

- groupdel 组名

#### 增加用户时直接加上去

- useradd -g 用户组 用户名

#### 修改用户组

- usermod -g 用户组 用户名

### 用户和组的相关文件

#### /etc/passwd文件

- 用户(user)的配置文件，记录用户的各种信息
- 每行的含义： 用户名：口令：用户标识号：组标识号：注释性描述：主目录：登录Shell

#### /etc/shadow文件

- 口令配置文件
- 每行的含义： 登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志

#### /etc/group文件

- 组（group）的配置文件，记录Linux包含的组的信息

- 每行含义：组名：口令：组标识号：组内用户列表

### 实用指令

#### 指定运行级别

- 切换到置定运行级别的指令：init [0123456]

![EgAZ6.png](https://s3.jpg.cm/2020/12/07/EgAZ6.png)



#### 帮助指令

**当我们对某个指令不熟悉时，我们可以使用帮助指令来了解指令使用方法**

- man 获取帮助信息
  - man [命令或配置文件]
  - 例子： man ls
- help指令
  - help命令（功能描述：获得shell内置命令的帮助信息）
  - 例子：help cd

#### 文件目录类

- pwd 显示当前所在工作目录绝对路径
- ls [选项]

  - -a: 显示当前目录所有文件和目录
  - -l：以列表的方式显示信息
- mkdir [选项] 要创建的目录

  - -p：创建多级目录
- rmdir [选项] 要删除的空目录（如果目录下有内容是无法删除的可以使用rm -rf 删除一个目录）
- touch 文件名称
- cp [选项] source（被拷贝目录和名字） dest（拷贝到的目录和名字）

  - 例子：cp aaa.txt bbb/  （表示将当前目录下的aaa.txt文件拷贝到当前目录的bbb这个目录下）
- r：递归复制整个文件夹。  例子：cp -r test/ zwj/
- rm [选项] 要删除的的文件或目录
  - -r：递归删除整个文件夹
  - -f：强制删除不提示
- mv 移动文件与目录或重命名
  - mv oldName newName （功能描述，重命名）
  - mv file /root/  （功能描述，移动）
- cat [选项] 要查看的文件，是以只读的方式打开
  - -n：显示行号
  - 为了方便一般跟管道符| more进行分页显示
- more：是一个基于vi编辑器的文本过滤器，它是以全屏幕的方式按页显示文本文件的内容。
  - 用法：more 要查看的文件
  - 操作：空格（spcae）代表向下翻一页
  - Enter：代表向下翻一行
  - q:代表like离开more
  - Ctrl+F向下滚动一屏
  - Crtl+B返回上一屏
  - =输出当前行号
  - :f输出文件名和当前行号
- less：功能与more指令类似，但是比more指令更强大，支持各种终端显示。less指令在显示文件内容时，并不是一次将整个文件加载之后才会显示，而是根据显示需要加载内容，对于显示大型文件具有较高效
  - 用法： less 要查看的文件
  - 操作：空格键 向下翻一页
  - /字串   向下搜索
  - ？字串 向上搜索
- 重定向和追加
  - ls -l>文件（功能描述：列表的内容写入文件a.txt中）
  - ls -al>>文件 （功能描述：列表的内容追加到文件aa.txt的末尾）
  - cat文件1>文件2 （功能描述：将文件1的内容覆盖到文件2）
  - echo “内容”>>文件
- echo [选项] [输出内容]
- head用于显示文件开头部分内容，默认情况下head指令显示文件的前10行内容
  - head 文件  （功能描述：查看文件开头10行内容）
  - head -n 5文件（功能描述：查看文件头5行内容）
- tail用于输出文件中尾部的内容，默认情况下tail指令显示文件的后10行内容。
  - tail 文件 （功能描述：查看文件后10行内容）
  - tail -n5文件（功能描述：查看文件后5行内容）
  - tail -f 文件   （功能描述：实时追踪该文档的所有更新）
- date指令-显示当前日期
  - date（功能描述：显示当前时间）
  - date+%Y（功能描述：显示当前年份）
  - date+%m（功能描述：显示当前月份）
  - date+%d（功能描述和：显示当前是哪一天）
- find指令将从指定目录下递归地遍历各个子目录，将满足条件的文件或者目录显示在终端
  - find [搜索范围] [选项]
  - -name   按照指定文件名查找模式查找文件
  - -user 查找属于指定用户名所有文件
  - -size 按照指定大小查找文件
- locate可以快速定位文件路径。
  - lcoate 搜索文件
  - 由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库
- grep指令和管道符号
  - grep过滤查找，管道符，“ | ”，表示将前一个命令的处理结果输出传递给后面的命令处理。
  - grep [选项] 查找内容 源文件
  - 选项：-n 显示匹配行及行号
  - -i：忽略字母大小
- tar指令值打包指令，最后打包后的文件时.tar.gz的文件
  - ![E0yBD.png](https://s3.jpg.cm/2020/12/08/E0yBD.png)

### 进程管理

#### 进程介绍和查询

- ps命令时用来查看目前系统中，有哪些正在执行，以及它们执行的状况。可以不加任何参数
- 字段
  - PID：进程的识别号
  - TTY：终端机号
  - TIME：此进程所消CPU时间
  - CMD：正在执行的命令或进程
- ps -a：显示当前终端所有进程信息
- ps -u：以用户的格式显示进程信息
- ps -x：显示后台进程运行的参数
- 显示系统执行的进程：ps -aux|grep xxx
- 全格式显示当前所有进程：ps -ef
  - -e显示所有进程
  - -f全格式

#### 进程终止

- kill [选项] 进程号（功能描述：通过进程号杀死进程）
- killall 进程名称 （功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）
- 常用选项
  - -9：表示强迫进程立即停止

## 安装jdk

- 1. 现将软件通过xftp5上传到/opt目录下
- 2. 解压缩到/opt
- 3. 配置环境变量的配置文件 vim /etc/profile（在最后面添加如下内容）
- 4. JACA_HOME=/opt/jdk1.8.0_251
- 5. PATH=/opt/jdk1.8.0_251/bin:$PATH
- 6. export JAVA_HOME PATH

## 安装mysql

- 1. 卸载旧版本
     - 使用命令检查是否安装有MySQL Server：rpm -qa|grep mysql
     - 如果有 rpm -e mysql   普通删除模式
     - rpm -e --nodeps mysql   强力删除模式，如果使用上面那个命令删除时提示有依赖其他文件，则用该命令对其强力删除

- 2. 安装编译代码需要的包
     - yum -y install make gcc-c++ cmake bison-devel ncurses-devel

- 3. 将下载的包放到/opt目录下 使用 tar zxvf mysql-5.6.14.tar.gz 解压

- 4. cd mysql-5.6.14

- 5. 编译![ECfAL.png](https://s3.jpg.cm/2020/12/08/ECfAL.png)

- 6. 编译并安装  make&& make install

- 7. 设置权限

     - 使用下面命令查看是否有mysql用户及用户组

       - cat/etc/passwd 查看用户列表

       - cat/etc/group 查看用户组列表 

     - 如果没有就有创建

       - groupadd mysql    增加一个mysql组
       - useradd -g mysql mysql   增加一个mysql用户并且放到mysql组里面
       - 修改/usr/local/mysql权限
       - 修改/usr/local/mysql权限 chown -R mysql/usr/local/mysql

     - 初始化配置，进入安装路径（在执行下面的指令），执行初始化配置脚本，配置系统自带的数据和表

       - cd/usr/local/mysql
       - scripts/mysql_install_db --basedir=/usr/local/mysql -datadir=/usr/local/mysql/data --usr=mysql

     - 注：在启动MySQL服务时，会按照一定次序搜索my.cnf，现在/etc目录下找，找不到则会搜索"$basedir/my.cnf",在本例中就是/usr/local/mysql/my.cnf，这是新版本MySQL的配置文件的默认位置！

     - 启动MySQL

       - 添加服务，拷贝服务脚本到init.d目录下，并设置卡机启动
       - [ 注意在 /usr/local/mysql下执行 ]
       - cp support -files/mysql.server /etc/init.d/mysql
       - chkconfig mysql on   -设置默认自启动
       - service mysql start     -启动MySQL

     - 修改root密码

       - cd/usr/local/mysql/bin
       - ./mysql -uroot
       - mysql> SET PASSWORD=PASSWORD('root');

## 安装tomcat

- 1. 解压缩到/opt

- 2. 在tomcat的bin目录下，启动tomcat    ./startup.sh

- 3. 开放端口   vim /etc/sysconfig/iptables

  - ![E3c0W.png](https://s3.jpg.cm/2020/12/08/E3c0W.png)
  - 然后重启防火墙



